import{e as h,f,g as l,h as a}from"../../../_chunks/chunk-N4A2EPJ4.js";import{a as u,b as v,c as o,d as p,f as w,g as S}from"../../../_chunks/chunk-FEDAVPE7.js";var x=v((q,y)=>{y.exports=Serenity.Extensions});var F=v((K,k)=>{k.exports=Slick});var C=v((T,R)=>{R.exports=Slick});var G=o(w(),1);var g=o(S(),1);var m=o(S(),1);var i=class extends m.EntityDialog{constructor(){super(...arguments);this.form=new f(this.idPrefix)}getFormKey(){return f.formKey}getRowDefinition(){return l}getService(){return a.baseUrl}};u(i,"MovieDialog"),i=p([m.Decorators.registerClass("SerenePoC.MovieDB.MovieDialog")],i);var d=o(x(),1),c=o(F(),1),b=o(C(),1),n=o(w(),1);var s=class extends g.EntityGrid{getColumnsKey(){return h.columnsKey}getDialogType(){return i}getRowDefinition(){return l}getService(){return a.baseUrl}constructor(e){super(e)}getQuickFilters(){let e=super.getQuickFilters(),t=(0,n.first)(e,r=>r.field==l.Fields.GenreList);return t.handler=r=>{let E=r.request,D=r.widget.values;E.Genres=D.map(P=>parseInt(P,10)),r.handled=!0},e}getQuickSearchFields(){return[{name:"",title:"all"},{name:"Description",title:"description"},{name:"Storyline",title:"storyline"},{name:"Year",title:"year"}]}createSlickGrid(){var e=super.createSlickGrid();return e.registerPlugin(new b.GroupItemMetadataProvider),this.view.setSummaryOptions({aggregators:[new c.Aggregators.Avg("Runtime"),new c.Aggregators.Sum("Runtime"),new c.Aggregators.Max("Runtime")]}),e}getColumns(){var e=super.getColumns();return(0,n.first)(e,t=>t.field==="Runtime").groupTotalsFormatter=(t,r)=>t.avg?"avg: "+(0,n.coalesce)((0,n.formatNumber)(t.avg[r.field],"0."),""):"",e}getSlickOptions(){var e=super.getSlickOptions();return e.showFooterRow=!0,e}getButtons(){var e=super.getButtons(),t=l.Fields;return e.push(d.ExcelExportHelper.createToolButton({grid:this,service:a.baseUrl+"/ListExcel",onViewSubmit:()=>this.onViewSubmit(),separator:!0})),e.push(d.PdfExportHelper.createToolButton({grid:this,onViewSubmit:()=>this.onViewSubmit()})),e.push({title:"Group By Year",cssClass:"expand-all-button",onClick:()=>this.view.setGrouping([{getter:"Year"}])}),e.push({title:"No Grouping",cssClass:"collapse-all-button",onClick:()=>this.view.setGrouping([])}),e}};u(s,"MovieGrid"),s=p([g.Decorators.registerClass("SerenePoC.MovieDB.MovieGrid")],s);function B(){(0,G.initFullHeightGridPage)(new s($("#GridDiv")).element)}u(B,"pageInit");export{B as default};
//# sourceMappingURL=MoviePage.js.map
